{% do document.head.append([
	{
		tagName: "link",
		attribute: {
			rel: "stylesheet",
			href: "/assets/css/error.css" | asset
		}
	}
]) %}

{% do document.setTitle("Caught an Error!") %}
{% do document.addAttr("lang", "en") %}
{% do document.body.addClass("text-bg-dark") %}
{% do document.body.append([
	{
		tagName: "script",
		attribute: {
			type: "text/javascript",
			src: "/assets/js/error.js" | asset
		}
	}
]) %}

{% block content %}
	<div class="container px-md-5 pt-5">
		<h1 class="fs-1 fw-bold text-danger">Caught an Error</h1>
		<section class="border-5 border-start border-danger ps-3 pt-2 pb-1 mb-3 bg-danger bg-opacity-10">
			<header>
				<h2 class="">{{title??"Title Not Available"}}</h2>
			</header>
			<article>
				<p class="mb-0">{{message??"Message Not Available"}}</p>
			</article>
		</section>
		<div class="row">

			<div class="col-12 col-lg-6 mb-3">
				<div>
					{{file}}:{{line}}
					<div class="px-1 py-1">
						{{snippet.render()}}
					</div>
				</div>
				<p>Did you fix the error?
					<button class="btn btn-outline-secondary rounded-pill text-sm ms-3" type="button" onclick="(() => refreshWindow())()">REFRESH</button>
				</p>
			</div>

			<div class="col-6">
				<div>
					<h2>Stack Trace</h2>
					{# {{tracers|json_encode }} #}
					<ol type="number" class="tracer-wrapper">
						{% for item in tracers %}
							<li>
								<span>{{item.file??item.class}}</span>
								{{item.line?":"~item.line}}
								{{item.function}}
							</li>
						{% endfor %}
					</ol>
				</div>
			</div>
		</div>
		<div class="animation-shadow"></div>
	</div>
{% endblock %}
